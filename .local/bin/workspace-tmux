#!/usr/bin/env bash

workspace_dir=~/Documents/Workspaces

group=`basename $(ls -d $workspace_dir/*) | fzf`

if [ -z $group ]; then
    exit 1
fi

workspace=`basename $(ls -d $workspace_dir/$group/*) | fzf`

if [ -z $workspace ]; then
    exit 1
fi

project_basename=`basename $(ls -d $workspace_dir/$group/$workspace/*) | fzf`

if [ -z $project_basename ]; then
    exit 1
fi

project_fullname=$group/$workspace/$project_basename

tmux has-session -t $project_fullname >/dev/null

if [ $? != 0 ]; then
  tmux new-session -d -s $project_fullname -c "$workspace_dir/$project_fullname"
else
  [ -z "${TMUX}" ] && tmux attach-session -t $project_fullname
fi

