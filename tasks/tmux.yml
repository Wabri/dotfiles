---
- name: Init Tmux Conf
  copy:
    remote_src: yes
    src: .tmux.conf
    dest: "{{ home_dir }}/.tmux.conf"
    mode: '0644'
    backup: yes

- name: Init Tmux plugins
  block:
    - name: Install tmux plugin manager
      git:
        repo: https://github.com/tmux-plugins/tpm
        dest: "{{ home_dir }}/.tmux/plugins/tpm"
    
    - name: Install Tmux plugins
      shell: "TMUX_PLUGIN_MANAGER_PATH={{ home_dir }}/.tmux/plugins/ {{ home_dir }}/.tmux/plugins/tpm/bin/install_plugins"

    - name: Update Tmux plugins
      shell: "TMUX_PLUGIN_MANAGER_PATH={{ home_dir }}/.tmux/plugins/ {{ home_dir }}/.tmux/plugins/tpm/bin/update_plugins all"
        
    - name: Clean Tmux plugins
      shell: "TMUX_PLUGIN_MANAGER_PATH={{ home_dir }}.tmux/plugins/ {{ home_dir }}/.tmux/plugins/tpm/bin/clean_plugins"
